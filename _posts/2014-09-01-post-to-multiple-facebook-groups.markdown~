---
layout: post
title: Post to Multiple Facebook Groups
date: 2014-09-01 17:23:01 
---

I recently started a blog and I figured out that Facebook groups are one of the best places to promote my posts and quicky get some users to my site. If you have a lot of groups and you are already doing the same thing then you know that it takes a lot of time to post to all groups one by one. So I decided to make a simple script to do that in one click using Facebook Javascript SDK and Facebook Graph API.

Only thing you need to change is appId propery in FB.init function and you are ready to go.

{% highlight js %}
FB.init({
    appId: "Put your App ID here",
    cookie: true,
    xfbml: true,
    version: 'v2.1'
});
{% endhighlight %}

Note:

Please don't spam in groups. You may got banned for spamming in groups by group owners or temporary blocked by Facebook!
I guess Facebook will temporary block you from posting to groups (I got restricted from posting and joining groups for two weeks) if you post to large number of groups in short period of time.
Becouse of that I put the delay input field so you can specify delay time between two requests.
You can you this code as you like or you can download full example from my GitHub repository. If you are facing any problem please share it with me below in comments or send me an email.


{% highlight html %}
<script>
    // This is called with the results from from FB.getLoginStatus().
    function statusChangeCallback(response) {
        if (response.status === 'connected') {
            // Logged into your app and Facebook.
            getMyGroups();
        } 
    }

    // This function is called when someone finishes with the Login
    // Button.  See the onlogin handler attached to it in the sample
    // code below.
    function checkLoginState() {
        FB.getLoginStatus(function(response) {
            statusChangeCallback(response);
        });
    }

    window.fbAsyncInit = function() {
        FB.init({
            appId: "Put your App ID here",
            cookie: true, // enable cookies to allow the server to access 
            // the session
            xfbml: true, // parse social plugins on this page
            version: 'v2.1' // use version 2.1
        });
        // Now that we've initialized the JavaScript SDK, we call 
        // FB.getLoginStatus().  This function gets the state of the
        // person visiting this page. 
        //
        FB.getLoginStatus(function(response) {
            statusChangeCallback(response);
        });
    };

    // Load the SDK asynchronously
    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    // This function reads your Facebook groups.
    function getMyGroups() {        
        FB.api('/me/groups', function(response) {
            var groupList = document.getElementById('groups');
            response.data.forEach(function(group) {
                var opt = document.createElement("option");
                opt.value = group.id;
                opt.innerHTML = group.name;
                groupList.appendChild(opt);
            });
        },{scope: 'user_groups,publish_actions'});
    }

    function postToGroups() {
        var groupList = document.getElementById('groups');                
                
        var selectedGroups = [];        
        for (var i = 0; i < groupList.length; i++) {
            if (groupList[i].selected) {
                selectedGroups.push(groupList[i].value);
            }
        }
        
        var delay = parseInt(document.getElementById("delay").value, 10) * 1000;       
       
        function postOrFinish(){
            if(selectedGroups.length > 0){
                var groupId = selectedGroups.pop();
                var message = document.getElementById("message").value;
                var link = document.getElementById("link").value;
                FB.api(
                    "/" + groupId + "/feed",
                    "POST", {
                        "message": message,
                        "link": link
                    },
                    function(response) {
                        if(response.error){
                            console.log(response.error);
                        }
                        setTimeout(postOrFinish, delay);
                    });
            }
            else
            {
               alert('All done!');
            }
        }   
                                  
        postOrFinish();        
    }
</script>

<form>
    <label for="message">Message</label>
    <textarea rows="3" placeholder="Type your message here." id="message"></textarea> 


    <label for="link">Link</label>
    <input type="text" value="" id="link" placeholder="Your link goes here." />

    <label for="groups">Select your groups</label>
    <select multiple id="groups"></select>

    <label for="link">Delay (number of second between requests)</label>
    <input type="text" id="delay" />

    <button type="button" onclick="postToGroups();" id="post_button">Post</button>
</form>

{% endhighlight %}

